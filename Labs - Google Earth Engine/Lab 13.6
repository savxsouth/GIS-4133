/**** Start of imports. If edited, may not auto-convert in the playground. ****/
var roi = 
    /* color: #d63000 */
    /* shown: false */
    /* locked: true */
    /* displayProperties: [
      {
        "type": "rectangle"
      }
    ] */
    ee.Geometry.Polygon(
        [[[-113.49756467732547, 41.85710648027892],
          [-113.49756467732547, 40.60125650983299],
          [-111.69031370076297, 40.60125650983299],
          [-111.69031370076297, 41.85710648027892]]], null, false),
    no_loss = 
    /* color: #d63000 */
    /* shown: false */
    /* locked: true */
    /* displayProperties: [
      {
        "type": "rectangle"
      },
      {
        "type": "rectangle"
      },
      {
        "type": "rectangle"
      },
      {
        "type": "rectangle"
      },
      {
        "type": "rectangle"
      },
      {
        "type": "rectangle"
      },
      {
        "type": "rectangle"
      },
      {
        "type": "rectangle"
      },
      {
        "type": "rectangle"
      },
      {
        "type": "rectangle"
      },
      {
        "type": "rectangle"
      },
      {
        "type": "rectangle"
      },
      {
        "type": "rectangle"
      },
      {
        "type": "rectangle"
      },
      {
        "type": "rectangle"
      },
      {
        "type": "rectangle"
      },
      {
        "type": "rectangle"
      },
      {
        "type": "rectangle"
      },
      {
        "type": "rectangle"
      },
      {
        "type": "rectangle"
      },
      {
        "type": "rectangle"
      },
      {
        "type": "rectangle"
      },
      {
        "type": "rectangle"
      },
      {
        "type": "rectangle"
      },
      {
        "type": "rectangle"
      },
      {
        "type": "rectangle"
      },
      {
        "type": "rectangle"
      },
      {
        "type": "rectangle"
      },
      {
        "type": "rectangle"
      }
    ] */
    ee.FeatureCollection(
        [ee.Feature(
            ee.Geometry.Polygon(
                [[[-112.78863281660406, 41.43896371969817],
                  [-112.78863281660406, 41.41734055679766],
                  [-112.75292725019781, 41.41734055679766],
                  [-112.75292725019781, 41.43896371969817]]], null, false),
            {
              "class": 0,
              "system:index": "0"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-112.70074219160406, 41.36067433700866],
                  [-112.70074219160406, 41.34108725655878],
                  [-112.66640991621344, 41.34108725655878],
                  [-112.66640991621344, 41.36067433700866]]], null, false),
            {
              "class": 0,
              "system:index": "1"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-112.83532471113531, 41.588069933381796],
                  [-112.83532471113531, 41.57677046829438],
                  [-112.82708496504156, 41.57677046829438],
                  [-112.82708496504156, 41.588069933381796]]], null, false),
            {
              "class": 0,
              "system:index": "2"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-112.90536255293219, 41.45440442676762],
                  [-112.90536255293219, 41.43793420857738],
                  [-112.89162964277594, 41.43793420857738],
                  [-112.89162964277594, 41.45440442676762]]], null, false),
            {
              "class": 0,
              "system:index": "3"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-112.36016601972906, 41.328713432651035],
                  [-112.36016601972906, 41.31840011720665],
                  [-112.34231323652594, 41.31840011720665],
                  [-112.34231323652594, 41.328713432651035]]], null, false),
            {
              "class": 0,
              "system:index": "4"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-112.25442261152594, 41.50173301367964],
                  [-112.25442261152594, 41.499675967732536],
                  [-112.24755615644781, 41.499675967732536],
                  [-112.24755615644781, 41.50173301367964]]], null, false),
            {
              "class": 0,
              "system:index": "5"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-112.76254028730719, 41.292609687838294],
                  [-112.76254028730719, 41.28229065998802],
                  [-112.74468750410406, 41.28229065998802],
                  [-112.74468750410406, 41.292609687838294]]], null, false),
            {
              "class": 0,
              "system:index": "6"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-112.21185059004156, 41.503789994285626],
                  [-112.21185059004156, 41.50070449887371],
                  [-112.20910400801031, 41.50070449887371],
                  [-112.20910400801031, 41.503789994285626]]], null, false),
            {
              "class": 0,
              "system:index": "7"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-112.10198730879156, 41.376133658672344],
                  [-112.10198730879156, 41.36788914423955],
                  [-112.09237427168219, 41.36788914423955],
                  [-112.09237427168219, 41.376133658672344]]], null, false),
            {
              "class": 0,
              "system:index": "8"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-112.32034058027594, 41.321494283225626],
                  [-112.32034058027594, 41.31736869588936],
                  [-112.31484741621344, 41.31736869588936],
                  [-112.31484741621344, 41.321494283225626]]], null, false),
            {
              "class": 0,
              "system:index": "9"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-112.57165283613531, 41.2946732975683],
                  [-112.57165283613531, 41.278162591899324],
                  [-112.55517334394781, 41.278162591899324],
                  [-112.55517334394781, 41.2946732975683]]], null, false),
            {
              "class": 0,
              "system:index": "10"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-111.9813598559221, 41.82917118469972],
                  [-111.9813598559221, 41.82865953799083],
                  [-111.98084487179123, 41.82865953799083],
                  [-111.98084487179123, 41.82917118469972]]], null, false),
            {
              "class": 0,
              "system:index": "11"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-111.95509566524827, 41.79603362077584],
                  [-111.95509566524827, 41.79488181421303],
                  [-111.9538940356096, 41.79488181421303],
                  [-111.9538940356096, 41.79603362077584]]], null, false),
            {
              "class": 0,
              "system:index": "12"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-111.96831359127366, 41.827380403328036],
                  [-111.96831359127366, 41.826868742306736],
                  [-111.96659697750412, 41.826868742306736],
                  [-111.96659697750412, 41.827380403328036]]], null, false),
            {
              "class": 0,
              "system:index": "13"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-111.89140929439866, 41.74482223558153],
                  [-111.89140929439866, 41.743285262399866],
                  [-111.88728942135178, 41.743285262399866],
                  [-111.88728942135178, 41.74482223558153]]], null, false),
            {
              "class": 0,
              "system:index": "14"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-111.91123618343674, 41.850336982387155],
                  [-111.91123618343674, 41.84950582935966],
                  [-111.91054953792893, 41.84950582935966],
                  [-111.91054953792893, 41.850336982387155]]], null, false),
            {
              "class": 0,
              "system:index": "15"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-111.9106353686174, 41.847268055994306],
                  [-111.9106353686174, 41.846372924730595],
                  [-111.90951956966721, 41.846372924730595],
                  [-111.90951956966721, 41.847268055994306]]], null, false),
            {
              "class": 0,
              "system:index": "16"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-112.2796441456417, 40.79184258240411],
                  [-112.2796441456417, 40.77728515536957],
                  [-112.2576714893917, 40.77728515536957],
                  [-112.2576714893917, 40.79184258240411]]], null, false),
            {
              "class": 0,
              "system:index": "17"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-112.3785210987667, 40.86769746178392],
                  [-112.3785210987667, 40.844846222601504],
                  [-112.34830869642295, 40.844846222601504],
                  [-112.34830869642295, 40.86769746178392]]], null, false),
            {
              "class": 0,
              "system:index": "18"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-112.59550107923545, 40.905073394677814],
                  [-112.59550107923545, 40.897807505480046],
                  [-112.58588804212607, 40.897807505480046],
                  [-112.58588804212607, 40.905073394677814]]], null, false),
            {
              "class": 0,
              "system:index": "19"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-112.4389459034542, 40.96420877693022],
                  [-112.4389459034542, 40.94450286449623],
                  [-112.39637388196982, 40.94450286449623],
                  [-112.39637388196982, 40.96420877693022]]], null, false),
            {
              "class": 0,
              "system:index": "20"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-112.10111631361045, 40.94346554827324],
                  [-112.10111631361045, 40.936203878510014],
                  [-112.09562314954795, 40.936203878510014],
                  [-112.09562314954795, 40.94346554827324]]], null, false),
            {
              "class": 0,
              "system:index": "21"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-112.72209599776808, 41.15838071170623],
                  [-112.72209599776808, 41.13356142009247],
                  [-112.68364384933058, 41.13356142009247],
                  [-112.68364384933058, 41.15838071170623]]], null, false),
            {
              "class": 0,
              "system:index": "22"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-112.46666386886183, 41.08285953376178],
                  [-112.46666386886183, 41.071472096917006],
                  [-112.44469121261183, 41.071472096917006],
                  [-112.44469121261183, 41.08285953376178]]], null, false),
            {
              "class": 0,
              "system:index": "23"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-112.35954716964308, 41.03004660707519],
                  [-112.35954716964308, 41.03004660707519],
                  [-112.35817387862745, 41.03004660707519],
                  [-112.35817387862745, 41.03004660707519]]], null, false),
            {
              "class": 0,
              "system:index": "24"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-112.30736211104933, 41.30813072050605],
                  [-112.30736211104933, 41.30709913669251],
                  [-112.30461552901808, 41.30709913669251],
                  [-112.30461552901808, 41.30813072050605]]], null, false),
            {
              "class": 0,
              "system:index": "25"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-112.32384160323683, 41.25446672187612],
                  [-112.32384160323683, 41.25446672187612],
                  [-112.31834843917433, 41.25446672187612],
                  [-112.31834843917433, 41.25446672187612]]], null, false),
            {
              "class": 0,
              "system:index": "26"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-112.58202031417433, 41.19042505887768],
                  [-112.58202031417433, 41.18732467811094],
                  [-112.57927373214308, 41.18732467811094],
                  [-112.57927373214308, 41.19042505887768]]], null, false),
            {
              "class": 0,
              "system:index": "27"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-112.2180981950337, 41.10769800259507],
                  [-112.2180981950337, 41.10666325390675],
                  [-112.21672490401808, 41.10666325390675],
                  [-112.21672490401808, 41.10769800259507]]], null, false),
            {
              "class": 0,
              "system:index": "28"
            })]),
    loss = 
    /* color: #98ff00 */
    /* shown: false */
    /* locked: true */
    /* displayProperties: [
      {
        "type": "rectangle"
      },
      {
        "type": "rectangle"
      },
      {
        "type": "rectangle"
      },
      {
        "type": "rectangle"
      },
      {
        "type": "rectangle"
      },
      {
        "type": "rectangle"
      },
      {
        "type": "rectangle"
      },
      {
        "type": "rectangle"
      },
      {
        "type": "rectangle"
      },
      {
        "type": "rectangle"
      },
      {
        "type": "rectangle"
      },
      {
        "type": "rectangle"
      },
      {
        "type": "rectangle"
      },
      {
        "type": "rectangle"
      },
      {
        "type": "rectangle"
      },
      {
        "type": "rectangle"
      },
      {
        "type": "rectangle"
      },
      {
        "type": "rectangle"
      },
      {
        "type": "rectangle"
      },
      {
        "type": "rectangle"
      },
      {
        "type": "rectangle"
      },
      {
        "type": "rectangle"
      },
      {
        "type": "rectangle"
      },
      {
        "type": "rectangle"
      },
      {
        "type": "rectangle"
      },
      {
        "type": "rectangle"
      },
      {
        "type": "rectangle"
      },
      {
        "type": "rectangle"
      },
      {
        "type": "rectangle"
      }
    ] */
    ee.FeatureCollection(
        [ee.Feature(
            ee.Geometry.Polygon(
                [[[-112.1258355518917, 40.91047040831991],
                  [-112.1258355518917, 40.90320511207613],
                  [-112.12308896986045, 40.90320511207613],
                  [-112.12308896986045, 40.91047040831991]]], null, false),
            {
              "class": 1,
              "system:index": "0"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-112.12995542493857, 40.9353739352252],
                  [-112.12995542493857, 40.92914893324577],
                  [-112.12308896986045, 40.92914893324577],
                  [-112.12308896986045, 40.9353739352252]]], null, false),
            {
              "class": 1,
              "system:index": "1"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-112.40324033704795, 40.73900471527399],
                  [-112.40324033704795, 40.72859860952375],
                  [-112.39774717298545, 40.72859860952375],
                  [-112.39774717298545, 40.73900471527399]]], null, false),
            {
              "class": 1,
              "system:index": "2"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-112.6312066456417, 40.976858958487924],
                  [-112.6312066456417, 40.96960096143129],
                  [-112.62296689954795, 40.96960096143129],
                  [-112.62296689954795, 40.976858958487924]]], null, false),
            {
              "class": 1,
              "system:index": "3"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-112.73969663587607, 40.97478532652102],
                  [-112.73969663587607, 40.96960096143132],
                  [-112.73283018079795, 40.96960096143132],
                  [-112.73283018079795, 40.97478532652102]]], null, false),
            {
              "class": 1,
              "system:index": "4"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-112.98038132730348, 41.587564559112856],
                  [-112.98038132730348, 41.58191502950382],
                  [-112.97351487222535, 41.58191502950382],
                  [-112.97351487222535, 41.587564559112856]]], null, false),
            {
              "class": 1,
              "system:index": "5"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-112.99480088296754, 41.526420670915954],
                  [-112.99480088296754, 41.51870935313788],
                  [-112.98656113687379, 41.51870935313788],
                  [-112.98656113687379, 41.526420670915954]]], null, false),
            {
              "class": 1,
              "system:index": "6"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-113.03599961343629, 41.50276971778976],
                  [-113.03599961343629, 41.50019844131034],
                  [-113.02981980386598, 41.50019844131034],
                  [-113.02981980386598, 41.50276971778976]]], null, false),
            {
              "class": 1,
              "system:index": "7"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-112.99411423745973, 41.49865562641708],
                  [-112.99411423745973, 41.49711277476997],
                  [-112.99068100992066, 41.49711277476997],
                  [-112.99068100992066, 41.49865562641708]]], null, false),
            {
              "class": 1,
              "system:index": "8"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-112.97832139078004, 41.43279462251391],
                  [-112.97832139078004, 41.42764641434127],
                  [-112.97214158120973, 41.42764641434127],
                  [-112.97214158120973, 41.43279462251391]]], null, false),
            {
              "class": 1,
              "system:index": "9"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-112.78262742105348, 41.60040256072904],
                  [-112.78262742105348, 41.597321673210686],
                  [-112.7785075480066, 41.597321673210686],
                  [-112.7785075480066, 41.60040256072904]]], null, false),
            {
              "class": 1,
              "system:index": "10"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-112.6082194620691, 41.42867608863616],
                  [-112.6082194620691, 41.42249779791771],
                  [-112.5972331339441, 41.42249779791771],
                  [-112.5972331339441, 41.42867608863616]]], null, false),
            {
              "class": 1,
              "system:index": "11"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-112.6466716105066, 41.42558701676142],
                  [-112.6466716105066, 41.42249779791771],
                  [-112.63705857339723, 41.42249779791771],
                  [-112.63705857339723, 41.42558701676142]]], null, false),
            {
              "class": 1,
              "system:index": "12"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-112.99686081949098, 41.63428261581957],
                  [-112.99686081949098, 41.633256208980946],
                  [-112.99548752847535, 41.633256208980946],
                  [-112.99548752847535, 41.63428261581957]]], null, false),
            {
              "class": 1,
              "system:index": "13"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-112.9762614542566, 41.355528637785184],
                  [-112.9762614542566, 41.352436088180916],
                  [-112.97214158120973, 41.352436088180916],
                  [-112.97214158120973, 41.355528637785184]]], null, false),
            {
              "class": 1,
              "system:index": "14"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-111.95380923489667, 41.80055151711526],
                  [-111.95380923489667, 41.80039155649658],
                  [-111.95363757351971, 41.80039155649658],
                  [-111.95363757351971, 41.80055151711526]]], null, false),
            {
              "class": 1,
              "system:index": "15"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-111.90051376696749, 41.83295097641383],
                  [-111.90051376696749, 41.832855048631934],
                  [-111.90042793627902, 41.832855048631934],
                  [-111.90042793627902, 41.83295097641383]]], null, false),
            {
              "class": 1,
              "system:index": "16"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-111.90626442309542, 41.826651413491206],
                  [-111.90626442309542, 41.82645953890262],
                  [-111.90600693102999, 41.82645953890262],
                  [-111.90600693102999, 41.826651413491206]]], null, false),
            {
              "class": 1,
              "system:index": "17"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-111.89901172991915, 41.825500157333956],
                  [-111.89901172991915, 41.82546817770076],
                  [-111.89892589923068, 41.82546817770076],
                  [-111.89892589923068, 41.825500157333956]]], null, false),
            {
              "class": 1,
              "system:index": "18"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-111.90158665057345, 41.82703516094324],
                  [-111.90158665057345, 41.82700318207675],
                  [-111.90145790454073, 41.82700318207675],
                  [-111.90145790454073, 41.82703516094324]]], null, false),
            {
              "class": 1,
              "system:index": "19"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-111.90090000506564, 41.83291900050264],
                  [-111.90090000506564, 41.83291900050264],
                  [-111.9008570897214, 41.83291900050264],
                  [-111.9008570897214, 41.83291900050264]]], null, false),
            {
              "class": 1,
              "system:index": "20"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-111.90587818499728, 41.835860717477395],
                  [-111.90587818499728, 41.83573281955079],
                  [-111.90566360827609, 41.83573281955079],
                  [-111.90566360827609, 41.835860717477395]]], null, false),
            {
              "class": 1,
              "system:index": "21"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-111.87633352112044, 41.7942948560565],
                  [-111.87633352112044, 41.79421486798848],
                  [-111.87618331741561, 41.79421486798848],
                  [-111.87618331741561, 41.7942948560565]]], null, false),
            {
              "class": 1,
              "system:index": "22"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-111.89448671173324, 41.79211914503816],
                  [-111.89448671173324, 41.79202315608639],
                  [-111.89429359268416, 41.79202315608639],
                  [-111.89429359268416, 41.79211914503816]]], null, false),
            {
              "class": 1,
              "system:index": "23"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-112.92606429886092, 41.632772051700556],
                  [-112.92606429886092, 41.63046255920854],
                  [-112.92263107132186, 41.63046255920854],
                  [-112.92263107132186, 41.632772051700556]]], null, false),
            {
              "class": 1,
              "system:index": "24"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-112.84366683792342, 41.690995220103176],
                  [-112.84366683792342, 41.68432915678292],
                  [-112.83474044632186, 41.68432915678292],
                  [-112.83474044632186, 41.690995220103176]]], null, false),
            {
              "class": 1,
              "system:index": "25"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-113.01738815139998, 41.616090524589914],
                  [-113.01738815139998, 41.61352375275365],
                  [-113.00914840530623, 41.61352375275365],
                  [-113.00914840530623, 41.616090524589914]]], null, false),
            {
              "class": 1,
              "system:index": "26"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-112.7653892500328, 41.65560591138225],
                  [-112.7653892500328, 41.65355376060447],
                  [-112.76126937698592, 41.65355376060447],
                  [-112.76126937698592, 41.65560591138225]]], null, false),
            {
              "class": 1,
              "system:index": "27"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-112.07115605636183, 40.985485118199115],
                  [-112.07115605636183, 40.98133833144766],
                  [-112.06291631026808, 40.98133833144766],
                  [-112.06291631026808, 40.985485118199115]]], null, false),
            {
              "class": 1,
              "system:index": "28"
            })]),
    no_water2001 = 
    /* color: #ffc82d */
    /* shown: false */
    /* locked: true */
    /* displayProperties: [
      {
        "type": "rectangle"
      },
      {
        "type": "rectangle"
      },
      {
        "type": "rectangle"
      },
      {
        "type": "rectangle"
      },
      {
        "type": "rectangle"
      },
      {
        "type": "rectangle"
      },
      {
        "type": "rectangle"
      },
      {
        "type": "rectangle"
      },
      {
        "type": "rectangle"
      },
      {
        "type": "rectangle"
      },
      {
        "type": "rectangle"
      },
      {
        "type": "rectangle"
      },
      {
        "type": "rectangle"
      },
      {
        "type": "rectangle"
      },
      {
        "type": "rectangle"
      },
      {
        "type": "rectangle"
      },
      {
        "type": "rectangle"
      },
      {
        "type": "rectangle"
      },
      {
        "type": "rectangle"
      },
      {
        "type": "rectangle"
      },
      {
        "type": "rectangle"
      },
      {
        "type": "rectangle"
      },
      {
        "type": "rectangle"
      },
      {
        "type": "rectangle"
      },
      {
        "type": "rectangle"
      },
      {
        "type": "rectangle"
      },
      {
        "type": "rectangle"
      },
      {
        "type": "rectangle"
      },
      {
        "type": "rectangle"
      },
      {
        "type": "rectangle"
      },
      {
        "type": "rectangle"
      },
      {
        "type": "rectangle"
      },
      {
        "type": "rectangle"
      }
    ] */
    ee.FeatureCollection(
        [ee.Feature(
            ee.Geometry.Polygon(
                [[[-112.02620331651659, 41.500191674327596],
                  [-112.02620331651659, 41.49980597400967],
                  [-112.02551667100877, 41.49980597400967],
                  [-112.02551667100877, 41.500191674327596]]], null, false),
            {
              "class": 0,
              "system:index": "0"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-112.00354401475877, 41.500448806596715],
                  [-112.00354401475877, 41.500191674327596],
                  [-112.00285736925096, 41.500191674327596],
                  [-112.00285736925096, 41.500448806596715]]], null, false),
            {
              "class": 0,
              "system:index": "1"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-112.00285736925096, 41.48334728725736],
                  [-112.00285736925096, 41.48296148663501],
                  [-112.00251404649705, 41.48296148663501],
                  [-112.00251404649705, 41.48334728725736]]], null, false),
            {
              "class": 0,
              "system:index": "2"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-112.03770462877245, 41.473315724573176],
                  [-112.03770462877245, 41.47305848460028],
                  [-112.03633133775682, 41.47305848460028],
                  [-112.03633133775682, 41.473315724573176]]], null, false),
            {
              "class": 0,
              "system:index": "3"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-112.07392517930955, 41.479231962198305],
                  [-112.07392517930955, 41.47884613707522],
                  [-112.07323853380174, 41.47884613707522],
                  [-112.07323853380174, 41.479231962198305]]], null, false),
            {
              "class": 0,
              "system:index": "4"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-112.12765519029588, 41.48604782729856],
                  [-112.12765519029588, 41.485147659790606],
                  [-112.1261102379033, 41.485147659790606],
                  [-112.1261102379033, 41.48604782729856]]], null, false),
            {
              "class": 0,
              "system:index": "5"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-111.96423355943651, 41.59295007351182],
                  [-111.96423355943651, 41.58986883023841],
                  [-111.95874039537401, 41.58986883023841],
                  [-111.95874039537401, 41.59295007351182]]], null, false),
            {
              "class": 0,
              "system:index": "6"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-112.56470505601854, 41.5621310227521],
                  [-112.56470505601854, 41.55956210470509],
                  [-112.55955521470995, 41.55956210470509],
                  [-112.55955521470995, 41.5621310227521]]], null, false),
            {
              "class": 0,
              "system:index": "7"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-112.63439957506151, 41.53335330769319],
                  [-112.63439957506151, 41.53078324595925],
                  [-112.6285630882451, 41.53078324595925],
                  [-112.6285630882451, 41.53335330769319]]], null, false),
            {
              "class": 0,
              "system:index": "8"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-112.65843216783495, 41.52692796190591],
                  [-112.65843216783495, 41.52435764490373],
                  [-112.65362564928026, 41.52435764490373],
                  [-112.65362564928026, 41.52692796190591]]], null, false),
            {
              "class": 0,
              "system:index": "9"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-112.43218247301073, 41.52204427230166],
                  [-112.43218247301073, 41.52024492532161],
                  [-112.4253160179326, 41.52024492532161],
                  [-112.4253160179326, 41.52204427230166]]], null, false),
            {
              "class": 0,
              "system:index": "10"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-112.39647690660448, 41.53618025766434],
                  [-112.39647690660448, 41.53232529525266],
                  [-112.38858048326463, 41.53232529525266],
                  [-112.38858048326463, 41.53618025766434]]], null, false),
            {
              "class": 0,
              "system:index": "11"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-112.48642746812791, 41.55596544787697],
                  [-112.48642746812791, 41.55339628474245],
                  [-112.48230759508104, 41.55339628474245],
                  [-112.48230759508104, 41.55596544787697]]], null, false),
            {
              "class": 0,
              "system:index": "12"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-113.08997515913552, 41.70838600284197],
                  [-113.08997515913552, 41.70223440184253],
                  [-113.08173541304177, 41.70223440184253],
                  [-113.08173541304177, 41.70838600284197]]], null, false),
            {
              "class": 0,
              "system:index": "13"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-113.45801715132302, 41.37535769051527],
                  [-113.45801715132302, 41.36917432888555],
                  [-113.44977740522927, 41.36917432888555],
                  [-113.44977740522927, 41.37535769051527]]], null, false),
            {
              "class": 0,
              "system:index": "14"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-113.13323382612771, 41.35732124298966],
                  [-113.13323382612771, 41.3531979244245],
                  [-113.11812762495583, 41.3531979244245],
                  [-113.11812762495583, 41.35732124298966]]], null, false),
            {
              "class": 0,
              "system:index": "15"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-113.1709993290574, 41.30524518016568],
                  [-113.1709993290574, 41.301118564373596],
                  [-113.15795306440896, 41.301118564373596],
                  [-113.15795306440896, 41.30524518016568]]], null, false),
            {
              "class": 0,
              "system:index": "16"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-113.17992572065896, 41.24899758212138],
                  [-113.17992572065896, 41.24538369475039],
                  [-113.16481951948708, 41.24538369475039],
                  [-113.16481951948708, 41.24899758212138]]], null, false),
            {
              "class": 0,
              "system:index": "17"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-113.07555560347146, 41.32226470994122],
                  [-113.07555560347146, 41.32071766358344],
                  [-113.07006243940896, 41.32071766358344],
                  [-113.07006243940896, 41.32226470994122]]], null, false),
            {
              "class": 0,
              "system:index": "18"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-113.34333052905613, 41.76484732602172],
                  [-113.34333052905613, 41.762286482692915],
                  [-113.3412705925327, 41.762286482692915],
                  [-113.3412705925327, 41.76484732602172]]], null, false),
            {
              "class": 0,
              "system:index": "19"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-113.26539626391941, 41.767920203103984],
                  [-113.26539626391941, 41.76740806714431],
                  [-113.2647096184116, 41.76740806714431],
                  [-113.2647096184116, 41.767920203103984]]], null, false),
            {
              "class": 0,
              "system:index": "20"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-113.42778792651707, 41.74051518796775],
                  [-113.42778792651707, 41.74025901114294],
                  [-113.42778792651707, 41.74025901114294],
                  [-113.42778792651707, 41.74051518796775]]], null, false),
            {
              "class": 0,
              "system:index": "21"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-113.15793624194676, 41.724117810947064],
                  [-113.15793624194676, 41.72232409388919],
                  [-113.1545030144077, 41.72232409388919],
                  [-113.1545030144077, 41.724117810947064]]], null, false),
            {
              "class": 0,
              "system:index": "22"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-113.24994673999363, 41.71591755278642],
                  [-113.24994673999363, 41.714123606828295],
                  [-113.24479689868504, 41.714123606828295],
                  [-113.24479689868504, 41.71591755278642]]], null, false),
            {
              "class": 0,
              "system:index": "23"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-113.36521735461766, 41.71610975831216],
                  [-113.36521735461766, 41.71559720896623],
                  [-113.36427321704441, 41.71559720896623],
                  [-113.36427321704441, 41.71610975831216]]], null, false),
            {
              "class": 0,
              "system:index": "24"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-113.32976928027684, 41.71931309911757],
                  [-113.32976928027684, 41.718672443729886],
                  [-113.32813849719578, 41.718672443729886],
                  [-113.32813849719578, 41.71931309911757]]], null, false),
            {
              "class": 0,
              "system:index": "25"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-112.81551305937812, 41.830796884149386],
                  [-112.81551305937812, 41.827471191903136],
                  [-112.81173650908515, 41.827471191903136],
                  [-112.81173650908515, 41.830796884149386]]], null, false),
            {
              "class": 0,
              "system:index": "26"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-112.73414556670234, 41.80367466236982],
                  [-112.73414556670234, 41.80111536929621],
                  [-112.73036901640937, 41.80111536929621],
                  [-112.73036901640937, 41.80367466236982]]], null, false),
            {
              "class": 0,
              "system:index": "27"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-112.7544016091828, 41.766298835439216],
                  [-112.7544016091828, 41.76399413318236],
                  [-112.7482217996125, 41.76399413318236],
                  [-112.7482217996125, 41.766298835439216]]], null, false),
            {
              "class": 0,
              "system:index": "28"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-112.88829748320624, 41.783709465551865],
                  [-112.88829748320624, 41.78191741302604],
                  [-112.8858942239289, 41.78191741302604],
                  [-112.8858942239289, 41.783709465551865]]], null, false),
            {
              "class": 0,
              "system:index": "29"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-112.79182378935859, 41.780125310415784],
                  [-112.79182378935859, 41.77910122929459],
                  [-112.79010717558906, 41.77910122929459],
                  [-112.79010717558906, 41.780125310415784]]], null, false),
            {
              "class": 0,
              "system:index": "30"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-112.83920232939765, 41.747602751870595],
                  [-112.83920232939765, 41.74580969056958],
                  [-112.8361124246125, 41.74580969056958],
                  [-112.8361124246125, 41.747602751870595]]], null, false),
            {
              "class": 0,
              "system:index": "31"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-113.0009073464875, 41.73402547052247],
                  [-113.0009073464875, 41.731719609319704],
                  [-112.99850408721015, 41.731719609319704],
                  [-112.99850408721015, 41.73402547052247]]], null, false),
            {
              "class": 0,
              "system:index": "32"
            })]),
    water_2001 = 
    /* color: #d63000 */
    /* displayProperties: [
      {
        "type": "rectangle"
      },
      {
        "type": "rectangle"
      },
      {
        "type": "rectangle"
      },
      {
        "type": "rectangle"
      },
      {
        "type": "rectangle"
      },
      {
        "type": "rectangle"
      },
      {
        "type": "rectangle"
      },
      {
        "type": "rectangle"
      },
      {
        "type": "rectangle"
      },
      {
        "type": "rectangle"
      },
      {
        "type": "rectangle"
      },
      {
        "type": "rectangle"
      },
      {
        "type": "rectangle"
      },
      {
        "type": "rectangle"
      },
      {
        "type": "rectangle"
      },
      {
        "type": "rectangle"
      },
      {
        "type": "rectangle"
      },
      {
        "type": "rectangle"
      },
      {
        "type": "rectangle"
      },
      {
        "type": "rectangle"
      },
      {
        "type": "rectangle"
      },
      {
        "type": "rectangle"
      },
      {
        "type": "rectangle"
      },
      {
        "type": "rectangle"
      },
      {
        "type": "rectangle"
      },
      {
        "type": "rectangle"
      },
      {
        "type": "rectangle"
      },
      {
        "type": "rectangle"
      },
      {
        "type": "rectangle"
      },
      {
        "type": "rectangle"
      }
    ] */
    ee.FeatureCollection(
        [ee.Feature(
            ee.Geometry.Polygon(
                [[[-112.88474552048966, 41.44588300233791],
                  [-112.88474552048966, 41.409844238325846],
                  [-112.85178653611466, 41.409844238325846],
                  [-112.85178653611466, 41.44588300233791]]], null, false),
            {
              "class": 1,
              "system:index": "0"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-112.74466983689591, 41.37687700671989],
                  [-112.74466983689591, 41.36038712143335],
                  [-112.72269718064591, 41.36038712143335],
                  [-112.72269718064591, 41.37687700671989]]], null, false),
            {
              "class": 1,
              "system:index": "1"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-112.59772769822403, 41.337706705299794],
                  [-112.59772769822403, 41.32636353446223],
                  [-112.57438175095841, 41.32636353446223],
                  [-112.57438175095841, 41.337706705299794]]], null, false),
            {
              "class": 1,
              "system:index": "2"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-112.65540592088028, 41.307797722004814],
                  [-112.65540592088028, 41.29644934444484],
                  [-112.64029971970841, 41.29644934444484],
                  [-112.64029971970841, 41.307797722004814]]], null, false),
            {
              "class": 1,
              "system:index": "3"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-112.78449527634903, 41.31604984708769],
                  [-112.78449527634903, 41.25413344944063],
                  [-112.68973819627091, 41.25413344944063],
                  [-112.68973819627091, 41.31604984708769]]], null, false),
            {
              "class": 1,
              "system:index": "4"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-112.62244693650528, 41.2500036007941],
                  [-112.62244693650528, 41.22831761229496],
                  [-112.60459415330216, 41.22831761229496],
                  [-112.60459415330216, 41.2500036007941]]], null, false),
            {
              "class": 1,
              "system:index": "5"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-112.73917667283341, 41.18595756520673],
                  [-112.73917667283341, 41.16735180927256],
                  [-112.72132388963028, 41.16735180927256],
                  [-112.72132388963028, 41.18595756520673]]], null, false),
            {
              "class": 1,
              "system:index": "6"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-112.71857730759903, 41.039035248846766],
                  [-112.71857730759903, 41.029712192231194],
                  [-112.70209781541153, 41.029712192231194],
                  [-112.70209781541153, 41.039035248846766]]], null, false),
            {
              "class": 1,
              "system:index": "7"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-112.37388126267716, 41.344924058365905],
                  [-112.37388126267716, 41.29232217207567],
                  [-112.32032291306778, 41.29232217207567],
                  [-112.32032291306778, 41.344924058365905]]], null, false),
            {
              "class": 1,
              "system:index": "8"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-112.66364566697403, 41.147706667006894],
                  [-112.66364566697403, 41.10632922850316],
                  [-112.64029971970841, 41.10632922850316],
                  [-112.64029971970841, 41.147706667006894]]], null, false),
            {
              "class": 1,
              "system:index": "9"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-112.68424503220841, 41.23864517087616],
                  [-112.68424503220841, 41.22212029400212],
                  [-112.68012515916153, 41.22212029400212],
                  [-112.68012515916153, 41.23864517087616]]], null, false),
            {
              "class": 1,
              "system:index": "10"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-112.89298526658341, 41.380998824998144],
                  [-112.89298526658341, 41.365540659542404],
                  [-112.83942691697403, 41.365540659542404],
                  [-112.83942691697403, 41.380998824998144]]], null, false),
            {
              "class": 1,
              "system:index": "11"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-112.51395694627091, 41.1249523047353],
                  [-112.51395694627091, 41.070102567947764],
                  [-112.43842594041153, 41.070102567947764],
                  [-112.43842594041153, 41.1249523047353]]], null, false),
            {
              "class": 1,
              "system:index": "12"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-112.37937442673966, 41.0058806048334],
                  [-112.37937442673966, 40.9924067633466],
                  [-112.35190860642716, 40.9924067633466],
                  [-112.35190860642716, 41.0058806048334]]], null, false),
            {
              "class": 1,
              "system:index": "13"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-112.63068668259903, 40.91254370064898],
                  [-112.63068668259903, 40.88866976417557],
                  [-112.58124820603653, 40.88866976417557],
                  [-112.58124820603653, 40.91254370064898]]], null, false),
            {
              "class": 1,
              "system:index": "14"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-112.33680240525528, 40.886593362468744],
                  [-112.33680240525528, 40.88347863774527],
                  [-112.30384342088028, 40.88347863774527],
                  [-112.30384342088028, 40.886593362468744]]], null, false),
            {
              "class": 1,
              "system:index": "15"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-112.45353214158341, 40.96233980770195],
                  [-112.45353214158341, 40.92603385281003],
                  [-112.39448062791153, 40.92603385281003],
                  [-112.39448062791153, 40.96233980770195]]], null, false),
            {
              "class": 1,
              "system:index": "16"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-112.32581607713028, 40.94678255673401],
                  [-112.32581607713028, 40.92603385281003],
                  [-112.30247012986466, 40.92603385281003],
                  [-112.30247012986466, 40.94678255673401]]], null, false),
            {
              "class": 1,
              "system:index": "17"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-112.35190860642716, 40.84505164693103],
                  [-112.35190860642716, 40.799325665313575],
                  [-112.28736392869278, 40.799325665313575],
                  [-112.28736392869278, 40.84505164693103]]], null, false),
            {
              "class": 1,
              "system:index": "18"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-112.41233341111466, 40.8585555627711],
                  [-112.41233341111466, 40.84401277017645],
                  [-112.39036075486466, 40.84401277017645],
                  [-112.39036075486466, 40.8585555627711]]], null, false),
            {
              "class": 1,
              "system:index": "19"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-112.28461734666153, 40.756688994093096],
                  [-112.28461734666153, 40.74212386356083],
                  [-112.27637760056778, 40.74212386356083],
                  [-112.27637760056778, 40.756688994093096]]], null, false),
            {
              "class": 1,
              "system:index": "20"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-112.33130924119278, 41.09908549427429],
                  [-112.33130924119278, 41.07734949788552],
                  [-112.27500430955216, 41.07734949788552],
                  [-112.27500430955216, 41.09908549427429]]], null, false),
            {
              "class": 1,
              "system:index": "21"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-112.18848697556778, 41.06906722702885],
                  [-112.18848697556778, 41.05664186438046],
                  [-112.16239444627091, 41.05664186438046],
                  [-112.16239444627091, 41.06906722702885]]], null, false),
            {
              "class": 1,
              "system:index": "22"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-112.12943546189591, 40.99033362019597],
                  [-112.12943546189591, 40.972709271535116],
                  [-112.10883609666153, 40.972709271535116],
                  [-112.10883609666153, 40.99033362019597]]], null, false),
            {
              "class": 1,
              "system:index": "23"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-112.93555728806778, 41.56415520965227],
                  [-112.93555728806778, 41.54154593425175],
                  [-112.88474552048966, 41.54154593425175],
                  [-112.88474552048966, 41.56415520965227]]], null, false),
            {
              "class": 1,
              "system:index": "24"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-112.85041324509903, 41.50041790215132],
                  [-112.85041324509903, 41.48087293075203],
                  [-112.81745426072403, 41.48087293075203],
                  [-112.81745426072403, 41.50041790215132]]], null, false),
            {
              "class": 1,
              "system:index": "25"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-112.77350894822403, 41.431469897263284],
                  [-112.77350894822403, 41.41293405906656],
                  [-112.73505679978653, 41.41293405906656],
                  [-112.73505679978653, 41.431469897263284]]], null, false),
            {
              "class": 1,
              "system:index": "26"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-112.89023868455216, 41.62064379740404],
                  [-112.89023868455216, 41.599081261518165],
                  [-112.84217349900528, 41.599081261518165],
                  [-112.84217349900528, 41.62064379740404]]], null, false),
            {
              "class": 1,
              "system:index": "27"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-112.94654361619278, 41.48601691598177],
                  [-112.94654361619278, 41.45102976413654],
                  [-112.90534488572403, 41.45102976413654],
                  [-112.90534488572403, 41.48601691598177]]], null, false),
            {
              "class": 1,
              "system:index": "28"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-112.36907474412247, 41.2133397543503],
                  [-112.36907474412247, 41.1978418090169],
                  [-112.33886234177872, 41.1978418090169],
                  [-112.33886234177872, 41.2133397543503]]], null, false),
            {
              "class": 1,
              "system:index": "29"
            })]);
/***** End of imports. If edited, may not auto-convert in the playground. *****/

// Lab 13, section 6.

////////////////////////////////////////////////////////////////////////////////////////////////////////////// 6.2

// Assign a common name to Landsat 5 and 8. Note that Band numbers/Designations are different in L5 and L8
var LC8_BANDS = ['SR_B2',   'SR_B3',    'SR_B4',  'SR_B5',  'SR_B6',    'SR_B7','ST_B10']; //Landsat 8
var LC5_BANDS = ['SR_B1',   'SR_B2',    'SR_B3',  'SR_B4',  'SR_B5',    'SR_B7', 'ST_B6']; //Landsat 5
var New_BNAMES = ['blue', 'green', 'red', 'nir', 'swir1', 'swir2', 'tir'];


//Landsat 8
var l8_collection = ee.ImageCollection('LANDSAT/LC08/C02/T1_L2')
    .select(LC8_BANDS, New_BNAMES)
    .filter(ee.Filter.lt('CLOUD_COVER', 1))
    .filterDate('2018-01-01', '2020-12-31')
    .filterBounds(roi)
    
//Landsat 5
var l5_collection = ee.ImageCollection('LANDSAT/LT05/C02/T1_L2')
    .select(LC5_BANDS, New_BNAMES)
    .filter(ee.Filter.lt('CLOUD_COVER', 1))
    .filterDate('2000-01-01', '2002-12-31')
    .filterBounds(roi)

// Take the median and clip it to the region of interest
var l5 = l5_collection.median().clip(roi);
var l8 = l8_collection.median().clip(roi);

////////////////////////////////////////////////////////////////////////////////////////////////////////////// 6.3

//visualize Landsat 5 in 2001
Map.addLayer(l5, {min: 0.0,max: 65000, bands: ['red', 'green', 'blue']}, '2001  L5');

// Use the Random Forest classification method to classify Landsat 5 images to create a 2001 binary water map
// merge training polygons
var sample_polygon2001 = no_water2001.merge(water_2001);

////////////////////////////////////////////////////////////////////////////////////////////////////////////// 6.4

// Overlay the point/polygons on the image to get training data.
var training2001water = l5.sampleRegions({
  collection: sample_polygon2001, 
  properties: ['class'], 
  scale: 30
});

////////////////////////////////////////////////////////////////////////////////////////////////////////////// 6.5

// Train a classifier
var classifier2001water = ee.Classifier.smileRandomForest(70).train({
  features: training2001water,  
  classProperty: 'class', 
  inputProperties: l5.bandNames()
});

// Classify the image
var water2001 = l5.classify(classifier2001water);
Map.addLayer(water2001, {min: 0, max: 1, palette: ['white', 'blue']}, 'Water in 2001');

//  Create a stacked image by adding Landsat 8 bands to Landsat 5. 
var stackedImage = l5.addBands(l8);

////////////////////////////////////////////////////////////////////////////////////////////////////////////// 6.6

// merge training polygons representing regions where water was lost in 2019 and where it was not lost
var sample_polygon = no_loss.merge(loss);
//Map.addLayer (sample_polygon)
                          
// Overlay the point/polygon on the image to get training data.
var training = stackedImage.sampleRegions({
  collection: sample_polygon, 
  properties: ['class'], 
  scale: 30
});

////////////////////////////////////////////////////////////////////////////////////////////////////////////// 6.7

// Train a classifier
var classifier = ee.Classifier.smileRandomForest(70).train({
  features: training,  
  classProperty: 'class', 
  inputProperties: stackedImage.bandNames()
});

// Classify the image using trained classifier
var water_change = stackedImage.classify(classifier);

////////////////////////////////////////////////////////////////////////////////////////////////////////////// 6.8

// Multiply the classified image (water lost or no loss) with 2001 water layer
var water_change = water_change.multiply(water2001);
Map.addLayer(water_change, {min: 0, max: 1, palette: ['white', 'red']}, 'Water loss or no loss');

////////////////////////////////////////////////////////////////////////////////////////////////////////////// 6.9

// Get the area of pixels. Divide by 1000000 to get the area in sq. km. Divide it by 18 to calculate the area per year (rate of change) Add the water change band to it.
// This will create a two band image, band 1 = area of pixel and band 2 = change detection map
var areaImage = ee.Image.pixelArea().divide(1000000).divide(18).addBands(water_change);

////////////////////////////////////////////////////////////////////////////////////////////////////////////// 6.10

// Calculate Area by each class in water_change layer (i.e., 0 = no water loss and 1 = water lost)
//Use a Grouped Reducer
var areas = areaImage.reduceRegion({
      reducer: ee.Reducer.sum().group({
      groupField: 1, // first band (0) is area, second band (1) = water area change
      groupName: 'waterarea_change',
      }),
    geometry: roi,
    scale: 30,
    maxPixels: 1e10
    }); 

// Generate a clean output, return output (change in km^2/year for each class) in Dictionary
var classAreas = ee.List(areas.get('groups'));
var classAreaLists = classAreas.map(function(item) {
      var areaDict = ee.Dictionary(item)
      var classNumber = ee.Number(areaDict.get('waterarea_change')).format()
      var area = ee.Number(areaDict.get('sum')).round()
      return ee.List([classNumber, area])
    })

var classwaterarea_changeAreaDict = ee.Dictionary(classAreaLists.flatten());
print(classwaterarea_changeAreaDict);

////////////////////////////////////////////////////////////////////////////////////////////////////////////// 6 - Q2
